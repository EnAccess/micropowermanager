FROM node:18.20.4

WORKDIR /app

# install JavaScript dependencies
COPY src/frontend/package*.json ./
RUN npm install

# get MicroPowerManager source code and configuration
COPY src/frontend .

# Copy the entrypoint script to the container and make it executable
COPY docker/entrypoint-ui-prod.sh /usr/local/bin/
RUN chmod +x /usr/local/bin/entrypoint-ui-prod.sh

# Set the entrypoint script to run when the container starts
ENTRYPOINT ["/usr/local/bin/entrypoint-ui-prod.sh"]

# Install http-server globally
RUN npm install -g http-server

EXPOSE 8081
